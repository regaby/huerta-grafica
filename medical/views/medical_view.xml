<openerp>
	<data>
		<!-- PARTNER -->

		<record model="ir.ui.view" id="view_partner_form">
			<field name="name">res.partner.form</field>
			<field name="model">res.partner</field>
			<field name="inherit_id" ref="base.view_partner_form" />
			<field name="type">form</field>
			<field name="arch" type="xml">
				<!-- <field name="supplier" position="after">
					<field name="is_patient" select="1" />
					<field name="is_doctor" select="1" />
					<field name="is_person" select="1" />
					<field name="is_institution" select="1" />
				</field> -->
				<field name="name" position="after">
					<field name="lastname" placeholder="Lastname" required="True"></field>
				</field>
				<xpath expr="//field[@name='website']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='function']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='title']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='fax']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='state_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='country_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='street2']" position="attributes">
                    <attribute name="placeholder">Ciudad</attribute>
                </xpath>
                <xpath expr="//field[@name='city']" position="attributes">
                    <attribute name="placeholder">Provincia</attribute>
                </xpath>
                <xpath expr="//field[@name='is_company']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//label[@for='is_company']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='parent_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='category_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <!-- <xpath expr="//label[@for='name']" position="after">
                    (
                            <field name="is_patient" class="oe_inline" /> <label for="is_patient" string="Is a Patient?"/>
                            <field name="is_doctor" class="oe_inline"/> <label for="is_doctor" string="Is a Doctor?"/>)
                </xpath> -->
                <xpath expr="//label[@for='name']" position="after">
                            <field name="is_patient" class="oe_inline" invisible="True"/> 
                            <field name="is_doctor" class="oe_inline" invisible="True"/> 
                </xpath>
                <page name='internal_notes' position="before">
                	<page name="patient" String="Patient Information" attrs="{'invisible': [('is_patient','=', False)]}">
                		<group colspan="4" col="4">
	                		<field name="dni"/>
	                		<field name="insurance"/>
	                		<field name="insurance_number"/>
	                		<field name="dob"/>
	                		<field name="sex"/>
	                		<field name="age"/>
	                		<newline/>
							<field name="deceased" />
							<field name="dod"
								attrs="{'invisible':[('deceased','=',False)],'required':[('deceased','=',True)]}" />
                		</group>
                		<newline />
						<separator string="Patient Critical Information" colspan="6" />
						<field colspan="6" name="critical_info" nolabel="1" />

                	</page>
                	<page name="patient" String="Phisycian Information" attrs="{'invisible': [('is_doctor','=', False)]}">
                		<group colspan="4" col="4">
	                		<field name="registration_number"/>
	                		<field name="speciality"/>
	                	</group>
                	</page>
                </page>
                
				
			</field>
		</record>

		<record id="action_partner_patient_form" model="ir.actions.act_window">
            <field name="name">Patients</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('is_patient','=',1)]</field>
            <field name="context">{'default_is_patient':1, 'search_default_is_patient':1}</field>
            <field name="filter" eval="True"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to add a Patients in your address book.
              </p>
            </field>
        </record>

        <record id="action_partner_phisicyan_form" model="ir.actions.act_window">
            <field name="name">Phisicyan</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('is_doctor','=',1)]</field>
            <field name="context">{'default_is_doctor':1, 'search_default_is_doctor':1}</field>
            <field name="filter" eval="True"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to add a Phisicyan in your address book.
              </p>
            </field>
        </record>

        <!-- Appointments -->

		<record id="view_medical_appointment" model="ir.ui.view">
			<field name="name">medical.appointment.calendar</field>
			<field name="model">medical.appointment</field>
			<field name="type">calendar</field>
			<field name="arch" type="xml">
				<calendar string="Appointments" color="doctor" date_start="appointment_date">
					<field name="patient" />
					<field name="doctor" />
				</calendar>
			</field>
		</record>

		<record model="ir.ui.view" id="medical_appointment_view">
			<field name="name">Appointment</field>
			<field name="model">medical.appointment</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Appointment">
					<group col="6" colspan="6">
						<field name="name" colspan="3"/>
						<!-- <field name="institution" context="{'default_is_institution': 1}" colspan="3"/> -->
						<newline/>
						<field name="patient" required="1" colspan="3"/>
						<field name="appointment_date" required="1" colspan="3"/>
						<newline/>
						
						<field name="care_type" colspan="3" required="True"/>
						<newline/>
						<field name="doctor" required="1" on_change="onchange_doctor(doctor, context)" colspan="3"/>
						<field name="speciality" colspan="3"/>
					</group>
					<newline />
					<separator colspan="6" string="Information" />
					<newline />
					<field colspan="4" nolabel="1" name="comments"/>
					<field name="state" widget="statusbar" options='{"clickable":"1"}'/>
				</form>
			</field>
		</record>

		<record model="ir.ui.view" id="medical_appointment_tree">
			<field name="name">Appointments</field>
			<field name="model">medical.appointment</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string='Appointment Information'>
					<field name="name"></field>
					<field name="patient"></field>
					<field name="care_type"></field>
					<!-- <field name="urgency"></field> -->
					<field name="appointment_date" />
					<field name="speciality"></field>
					<field name="doctor"></field>
					<field name="institution"></field>
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window" id="medical_action_form_appointment">
			<field name="name">Appointments</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">medical.appointment</field>
			<field name="view_type">form</field>
			<field name="view_mode">calendar,tree,form</field>
			<field name="context">{'current_user': True}</field>
		</record>

		<record id="view_medical_appointment_filter" model="ir.ui.view">
			<field name="name">medical.appointment.select</field>
			<field name="model">medical.appointment</field>
			<field name="type">search</field>
			<field name="arch" type="xml">
				<search string="Search Appointments">
					<filter icon="terp-personal" string="My appointments" domain="[('user_id','=',uid)]" />

					<newline />
					<separator orientation="vertical" />
					<field name="doctor" select="1" />
					<field name="patient" select="1" />
					<field name="user_id"/>
					<field name="appointment_date" select="1" />
					<newline />
					<group expand="0" string="Group By..." colspan="11" col="11">
						<filter string="Doctor" icon="terp-personal" domain="[]"
							context="{'group_by':'doctor'}" />
						<filter string="Specialty" icon="terp-personal" domain="[]"
							context="{'group_by':'speciality'}" />
						<filter string="Date" icon="terp-go-month" domain="[]"
							context="{'group_by':'appointment_date'}" />
					</group>

				</search>
			</field>
		</record>

		<record model="ir.actions.act_window" id="medical_action_form_new_appointment">
			<field name="name">New Appointment</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">medical.appointment</field>
			<field name="view_type">form</field>
			<field name="view_mode">form,tree,calendar</field>
		</record>


		<!-- Appointment shortcut from patient form -->

		<!-- <act_window domain="[('patient', '=', active_id)]" id="act_patient_appointments"
			name="Appointments" res_model="medical.appointment" src_model="medical.patient" /> -->

		<!-- Patient shortcut from appointment form -->

		<!-- <act_window domain="[('id', '=', patient)]" id="act_appointment_patient"
			name="Patient" res_model="medical.patient" src_model="medical.appointment" /> -->



	</data>
</openerp>
